{
  "id": "animate-number",
  "description": "숫자를 부드럽게 애니메이션하는 컴포넌트",
  "dependencies": [
    "motion"
  ],
  "snippets": [
    {
      "path": "animate-number/animate-number.tsx",
      "content": "/**\n * @file breeze:animate-number\n **/\n\n\"use client\";\n\nimport { AnimatePresence, useSpring, useTransform } from \"motion/react\";\nimport * as m from \"motion/react-m\";\nimport * as React from \"react\";\nimport styles from \"./animate-number.module.css\";\n\n// 상수로 정의하여 매번 재생성 방지\nconst DIGIT_NUMBERS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] as const;\nconst SPRING_CONFIG = { stiffness: 300, damping: 30 } as const;\nconst ANIMATION_CONFIG = { duration: 0.3, ease: \"easeInOut\" } as const;\n\ninterface DigitProps {\n  place: number;\n  value: number;\n  height: number;\n}\n\n// 개별 숫자 컴포넌트\nconst SingleNumber = React.memo(\n  ({\n    animatedValue,\n    number,\n    height,\n  }: {\n    animatedValue: ReturnType<typeof useSpring>;\n    number: number;\n    height: number;\n  }) => {\n    const y = useTransform(animatedValue, (latest: number) => {\n      const placeValue = latest % 10;\n      const offset = (10 + number - placeValue) % 10;\n      let yPosition = offset * height;\n      if (offset > 5) {\n        yPosition -= 10 * height;\n      }\n      return yPosition;\n    });\n\n    return (\n      <m.span\n        className={styles.number}\n        style={{\n          y,\n          height: `${height}px`,\n          lineHeight: `${height}px`,\n        }}\n      >\n        {number}\n      </m.span>\n    );\n  },\n);\n\n// 최적화된 Digit 컴포넌트\nconst Digit = React.memo(({ place, value, height }: DigitProps) => {\n  const absValue = Math.abs(value);\n  const digitValue = Math.floor(absValue / place) % 10;\n  const animatedValue = useSpring(digitValue, SPRING_CONFIG);\n\n  React.useEffect(() => {\n    animatedValue.set(digitValue);\n  }, [animatedValue, digitValue]);\n\n  return (\n    <m.div\n      className={styles.digit}\n      style={{ height: `${height}px` }}\n      layout\n      initial={{ width: 0, opacity: 0, x: -20, scale: 0.8 }}\n      animate={{ width: \"1ch\", opacity: 1, x: 0, scale: 1 }}\n      exit={{ width: 0, opacity: 0, x: -20, scale: 0.8 }}\n      transition={ANIMATION_CONFIG}\n      aria-hidden=\"true\"\n    >\n      {DIGIT_NUMBERS.map((num) => (\n        <SingleNumber\n          key={`${place}-${num}`}\n          animatedValue={animatedValue}\n          number={num}\n          height={height}\n        />\n      ))}\n    </m.div>\n  );\n});\n\nexport interface AnimateNumberProps {\n  /**\n   * 표시할 숫자 값\n   */\n  value: number;\n\n  /**\n   * 폰트 크기\n   * @default 48\n   */\n  fontSize?: number | string;\n\n  /**\n   * 폰트 굵기\n   * @default \"bold\"\n   */\n  fontWeight?: React.CSSProperties[\"fontWeight\"];\n\n  /**\n   * 텍스트 색상\n   * @default \"currentColor\"\n   */\n  color?: string;\n\n  /**\n   * 천 단위 구분 쉼표 표시\n   * @default false\n   */\n  showComma?: boolean;\n\n  /**\n   * 위아래 그라디언트 마스크 표시\n   * @default false\n   */\n  showGradient?: boolean;\n\n  /**\n   * 그라디언트 마스크 높이 (px)\n   * @default 20\n   */\n  gradientHeight?: number;\n\n  /**\n   * 컨테이너 스타일\n   */\n  containerStyle?: React.CSSProperties;\n\n  /**\n   * 추가 클래스명\n   */\n  className?: string;\n}\n\nexport default function AnimateNumber({\n  value,\n  fontSize = 48,\n  fontWeight = \"bold\",\n  color = \"currentColor\",\n  showComma = false,\n  showGradient = false,\n  gradientHeight = 20,\n  containerStyle,\n  className,\n}: AnimateNumberProps) {\n  // fontSize를 픽셀로 변환\n  const fontSizeNumber = React.useMemo(() => {\n    if (typeof fontSize === \"number\") return fontSize;\n\n    const match = fontSize.match(/(\\d+(?:\\.\\d+)?)/);\n    if (!match) return 48;\n\n    const num = Number.parseFloat(match[1]);\n    if (fontSize.includes(\"rem\")) {\n      return num * 16; // 기본 16px 기준\n    }\n    return num;\n  }, [fontSize]);\n\n  const height = fontSizeNumber * 1.2;\n\n  // 실제로 표시할 자리수 계산(상위 자리부터 1까지)\n  const displayPlaces = React.useMemo(() => {\n    const abs = Math.abs(value);\n    if (!Number.isFinite(abs) || abs === 0) return [1];\n    const places: number[] = [];\n    let p = 1;\n    while (p <= abs) p *= 10;\n    for (p = Math.floor(p / 10); p >= 1; p = Math.floor(p / 10)) {\n      places.push(p);\n    }\n    return places;\n  }, [value]);\n\n  // 마스크 스타일\n  const maskStyle: React.CSSProperties = showGradient\n    ? {\n        maskImage: `linear-gradient(to bottom, transparent 0px, black ${gradientHeight}px, black calc(100% - ${gradientHeight}px), transparent 100%)`,\n        WebkitMaskImage: `linear-gradient(to bottom, transparent 0px, black ${gradientHeight}px, black calc(100% - ${gradientHeight}px), transparent 100%)`,\n      }\n    : {};\n\n  return (\n    <div className={`${styles.container} ${className || \"\"}`} style={containerStyle}>\n      <div\n        className={styles.counter}\n        style={{\n          fontSize,\n          fontWeight,\n          color,\n          ...maskStyle,\n        }}\n      >\n        <AnimatePresence mode=\"popLayout\">\n          {value < 0 && (\n            <m.span\n              key=\"minus\"\n              className={styles.minus}\n              layout\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.8 }}\n              transition={{ duration: 0.2 }}\n              aria-hidden=\"true\"\n            >\n              -\n            </m.span>\n          )}\n          {displayPlaces.map((place, index) => {\n            const showCommaAfter =\n              showComma &&\n              displayPlaces.length > 1 &&\n              index < displayPlaces.length - 1 &&\n              (displayPlaces.length - index - 1) % 3 === 0;\n\n            return [\n              <Digit key={`digit-${place}`} place={place} value={value} height={height} />,\n              showCommaAfter && (\n                <m.span\n                  key={`comma-${place}`}\n                  className={styles.comma}\n                  layout\n                  initial={{ opacity: 0, scale: 0.8 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  exit={{ opacity: 0, scale: 0.8 }}\n                  transition={{ duration: 0.2 }}\n                  aria-hidden=\"true\"\n                >\n                  ,\n                </m.span>\n              ),\n            ].filter(Boolean);\n          })}\n        </AnimatePresence>\n        {/* Live region for screen readers */}\n        <output\n          aria-live=\"polite\"\n          aria-atomic=\"true\"\n          style={{\n            position: \"absolute\",\n            left: \"-10000px\",\n            width: \"1px\",\n            height: \"1px\",\n            overflow: \"hidden\",\n          }}\n        >\n          {showComma ? value.toLocaleString() : value.toString()}\n        </output>\n      </div>\n    </div>\n  );\n}\n\n/**\n * This file is a snippet from SEED Design, helping you get started quickly with @grape_design_react/* packages.\n * You can extend this snippet however you want.\n */\n"
    },
    {
      "path": "animate-number/animate-number.module.css",
      "content": ".container {\n  display: inline-flex;\n  align-items: center;\n  vertical-align: middle;\n  user-select: none;\n  position: relative;\n}\n\n.counter {\n  display: inline-flex;\n  align-items: center;\n  font-size: inherit;\n  font-weight: inherit;\n  color: inherit;\n  font-variant-numeric: tabular-nums;\n  line-height: 1;\n}\n\n.digit {\n  position: relative;\n  font-variant-numeric: tabular-nums;\n  overflow: hidden;\n  display: inline-flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.number {\n  position: absolute;\n  width: 1ch;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.comma {\n  display: inline-flex;\n  align-items: center;\n  margin: 0 0.05em;\n  font-variant-numeric: tabular-nums;\n}\n\n.minus {\n  display: inline-flex;\n  align-items: center;\n  margin-right: 0.1em;\n  font-variant-numeric: tabular-nums;\n}\n"
    }
  ]
}