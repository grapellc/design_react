---
title: Bottom Sheet
description: How to use Bottom Sheet with Stackflow.
---

<Card title="Bottom Sheet" href="/react/components/bottom-sheet">

Learn more about the Bottom Sheet component.

</Card>

## Making a Bottom Sheet Activity

**In most cases we recommend implementing Bottom Sheet as an [Activity](https://stackflow.so/docs/get-started/activity).**

- Managed as an activity, so z-index is easier to control (above child activities, below parent).
- Enables deep linking (e.g. open Bottom Sheet via URL).
- Eases migration from [@stackflow/plugin-basic-ui](https://www.npmjs.com/package/@stackflow/plugin-basic-ui) `BottomSheet`.

<StackflowExample names={["react/bottom-sheet/activity", "react/bottom-sheet/stackflow"]}>
  ```json doc-gen:file
  {
    "file": "../../../src/examples/bottom-sheet/activity.tsx",
    "codeblock": { "meta": "title='BottomSheetActivity.tsx'" }
  }
  ```
  ```json doc-gen:file
  {
    "file": "../../../src/examples/bottom-sheet/stackflow.tsx",
    "codeblock": { "meta": "title='BottomSheetStackflow.tsx'" }
  }
  ```
</StackflowExample>

### Usage

```tsx
import { useActivityZIndexBase } from "@seed-design/stackflow";
import { useActivity, useFlow, type ActivityComponentType } from "@stackflow/react/future";
// ... Bottom Sheet and other imports

const ActivityBottomSheetSimple: ActivityComponentType<"ActivityBottomSheetSimple"> = () => {
  const { pop } = useFlow();

  return (
    <BottomSheetRoot open={useActivity().isActive} onOpenChange={(open) => !open && pop()}>
      <BottomSheetContent
        title="Bottom Sheet as Activity"
        layerIndex={useActivityZIndexBase()}
      >
        <BottomSheetFooter>
          <ActionButton onClick={pop}>Confirm</ActionButton>
        </BottomSheetFooter>
      </BottomSheetContent>
    </BottomSheetRoot>
  );
};
```

1. Pass `useActivity().isActive` to the `open` prop so the sheet opens when the activity is active.
2. In `onOpenChange`, call `pop()` when the sheet closes to end the activity.
3. Pass `layerIndex={useActivityZIndexBase()}` so the Bottom Sheet activity has the correct z-index base.

- [Learn more about `useActivityZIndexBase`](#about-useactivityzindexbase)

#### Keeping Bottom Sheet Mounted

To keep the Bottom Sheet mounted when another activity is pushed on top, keep `open` in sync with `transitionState` and only call `pop()` from `onOpenChange` when appropriate:

```tsx
const { isActive, transitionState } = useActivity();

return (
  <BottomSheetRoot
    open={
      transitionState === "enter-active" || transitionState === "enter-done"
    }
    onOpenChange={(open) => !open && isActive && pop()}
  >
    {/* ... */}
  </BottomSheetRoot>
);
```

## Syncing Bottom Sheet State with a Step

When you cannot implement Bottom Sheet as its own activity, you can represent the “sheet open” state as a [Step](https://stackflow.so/docs/get-started/navigating-step).

- The current activity stays on screen; back or overlay dismiss can close the sheet.
- Use `BottomSheetTrigger` to open and close the sheet.

<Callout type="warn" title="Constraint">

**Close the Bottom Sheet before pushing another activity from a non-activity Bottom Sheet to avoid z-index issues.**

If the sheet must stay open when returning to the activity that opened it, or cannot be closed by the user, prefer [Making a Bottom Sheet Activity](#making-a-bottom-sheet-activity).

</Callout>

### Usage

Use step params to sync sheet open state, and `useActivityZIndexBase({ activityOffset: 1 })` so the sheet layers above the current activity. See the [Bottom Sheet component docs](/react/components/bottom-sheet) for examples.

## About `useActivityZIndexBase`

`useActivityZIndexBase` returns the z-index base for the current activity.

<Accordions>
<Accordion title="What does useActivityZIndexBase return?">

- It returns `useActivity().zIndex * 5`. `useActivity().zIndex` is the index of the current activity among entered activities.
- AppScreen elements (layer, appbar, dim, edge) use z-indices derived from this value.

</Accordion>
<Accordion title="What is the activityOffset option?">

- Use `activityOffset` when you want the z-index base of the *next* activity (e.g. one step ahead).
- For example, `useActivityZIndexBase({ activityOffset: 1 })` returns the next activity’s base.
- This is useful in the Step pattern when showing a Bottom Sheet above the current activity.

</Accordion>
</Accordions>
